!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var o=function(){function e(e){this.path=e.view.location.pathname,this.type=e.type,this.timeStamp=e.timeStamp,this.touches=[];for(var n=0;n<e.touches.length;n++){var t=e.touches.item(n);if(!t)return;this.touches.push({identifier:t.identifier,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,pageX:t.pageX,pageY:t.pageY,radiusX:t.radiusX,radiusY:t.radiusY,force:t.force,rotationAngle:t.rotationAngle})}}return e.listen=function(n){document.ontouchstart=e.listener,document.ontouchmove=e.listener,document.ontouchcancel=e.listener,document.ontouchend=e.listener,e.intervalNumber=setInterval(function(){e.actions.length<=0||(n(e.actions),e.actions=[])},e.timeout)},e.stop=function(){clearInterval(e.intervalNumber),document.ontouchstart=null,document.ontouchmove=null,document.ontouchcancel=null,document.ontouchend=null},e.timeout=5e3,e.actions=[],e.listener=function(n){n.isTrusted&&n instanceof TouchEvent&&e.actions.push(new e(n))},e}(),r=function(){function e(){}return e.show=function(){var e,n=document.getElementsByTagName("dialog");n.length>0?e=n[0]:((e=document.createElement("dialog")).appendChild(document.createTextNode("クーポン券！")),document.body.appendChild(e),e.onclick=function(){return e.close()},e.ontouchstart=function(){return e.close()}),e.showModal()},e}(),c=function(){function e(){}return e.send=function(n){e.ws&&e.ws.send(n)},e.connect=function(n){"function"==typeof WebSocket?(e.ws=new WebSocket(e.WS_URL),e.ws.onopen=function(e){console.log("ws_onopen")},e.ws.onmessage=function(e){console.log("ws_onmessage: data="+e.data),e.data===n.watch&&n.action()},e.ws.onclose=function(t){console.log("ws_onclose: reason="+t.reason+", code="+t.code+", wasClean="+t.wasClean),e.timeOutNumber=setTimeout(function(){return e.connect(n)},e.reConnectTimeOut)},e.ws.onerror=function(e){console.log("ws_onerror: evt="+JSON.stringify(e))}):console.log("WebSocket NOT supported by your Browser!")},e.close=function(){e.ws&&e.ws.close(),e.timeOutNumber&&clearTimeout(e.timeOutNumber)},e.reConnectTimeOut=1e3,e.WS_URL="wss://yukonws.herokuapp.com",e}(),u=function(){function e(){}return e.set=function(e,n){var t=new Date(Date.now()+31536e6).toUTCString();document.cookie=e+"="+n+";expires="+t+";path=/"},e.get=function(e){for(var n=e+"=",t=decodeURIComponent(document.cookie).split(";"),o=0;o<t.length;o++){for(var r=t[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(n))return r.substring(n.length,r.length)}},e}(),i=function(){function e(){}return e.set=function(){var n="YUKON_UUID";return!!u.get(n)||(u.set(n,e.generate()),!!u.get(n))},e.generate=function(){for(var e="",n=0;n<32;n++)e+=Math.floor(36*Math.random()).toString(36).toUpperCase();return e},e}();onload=function(){console.log("onload"),i.set()&&(c.connect({watch:"popup",action:r.show}),o.listen(function(e){return c.send(JSON.stringify(e))}))},onbeforeunload=function(){console.log("onbeforeunload"),o.stop(),c.close()}}]);